<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.10"/>
<title>Scanbot SDK: Main Page</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="ScanbotSDK.css" rel="stylesheet" type="text/css" />
<link href="ScanbotSDKTabs.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Scanbot SDK
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.10 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li class="current"><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Scanbot SDK Documentation</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h2>1. Introduction</h2>
<p>Scanbot SDK for iOS is a simple to use high level API, providing a collection of classes and functions for scanning and processing documents from your mobile device's camera or other image sources like your photo library.</p>
<p>Boost your iOS app with the powerful and convenient document scanning and processing features that also drive the #1 scanning app in the iOS app store: Scanbot Pro.</p>
<p>Scanbot SDK consists of a bunch of modules, each individually licensable or avalaible in license packages.</p>
<p>Currently the following modules are available</p><ul>
<li>Document detection in digital images</li>
<li>User interface for guided, automatic document scanning using the document detection module</li>
<li>Image processing for rotating, cropping, filtering and perspective correction, optimized for the needs of document scanning</li>
<li>PDF creation, merge a collection of processed or unprocessed document images and write them into a PDF document with one page per image</li>
<li>Optical character recognition, recognize text in document images and create searchable PDF documents with selectable text</li>
<li>Payform recognition, detect and recognize SEPA payforms on images and extract the important data fields via OCR</li>
</ul>
<p>Find a sample project using Scanbot SDK here: <a href="https://github.com/doo/Scanbot-SDK-Examples-iOS">https://github.com/doo/Scanbot-SDK-Examples-iOS</a></p>
<p>If you need further information or are interested in licensing Scanbot SDK please contact us: <a href="#" onclick="location.href='mai'+'lto:'+'sdk'+'@s'+'can'+'bo'+'t.i'+'o'; return false;">sdk@s<span style="display: none;">.nosp@m.</span>canb<span style="display: none;">.nosp@m.</span>ot.io</a></p>
<p><br />
<br />
</p><h2>2. Installation</h2>
<p>Scanbot SDK is delivered either as a static library, together with a bundle of resources or as an embedded framework. The static library is compatible with iOS 7 and above. Embedded frameworks are supported by iOS 8 and above and are much easier to install. If your app targets iOS 8+ you should use the framework. Otherwise go with the static library.</p>
<p><br />
</p><h3>2.1 Embedded framework</h3>
<p>Installing the Scanbot SDK embedded framework is really easy.</p>
<ul>
<li>1. Open your apps project in Xcode</li>
<li>2. Select your target and add an embedded framework</li>
<li>3. Select 'Add Other...'</li>
<li>4. Locate and select ScanbotSDK.framework</li>
<li>5. Select 'Copy items if needed' and 'Create groups' and hit 'Finish'</li>
<li>6. Add the umbrella header import to your source code file:</li>
</ul>
<p>If you want to make use of <a class="el" href="interface_s_b_s_d_k_credit_card_recognizer.html">SBSDKCreditCardRecognizer</a> you must add ScanbotSDKCreditCardData.bundle to your apps bundle and make sure that the bundle is included in your apps build copy phase.</p>
<div class="fragment"><div class="line"><span class="preprocessor">#import &lt;ScanbotSDK/ScanbotSDK.h&gt;</span></div>
</div><!-- fragment --><p>or</p>
<div class="fragment"><div class="line">@<span class="keyword">import</span> <a class="code" href="interface_scanbot_s_d_k.html">ScanbotSDK</a>;</div>
</div><!-- fragment --><p>You are now ready to use Scanbot SDK in your source file. <br />
 <br />
<a class="el" href="install_framework.html">See more detailed instructions</a></p>
<p><br />
</p><h3>2.2 Static library</h3>
<p>If you decided to install Scanbot SDK as a static library you have to include additional dynamically linked frameworks.</p>
<ul>
<li>1. Open your apps project in Xcode</li>
<li>2. Locate the folder containing the files libScanbotSDK.a, ScanbotSDK.bundle and the include folder in Finder</li>
<li>3. Drag the folder into your Xcode projects Navigator, this adds the library to the linked frameworks and library and places the bundle in the resource copy build phase</li>
<li>4. Add the following frameworks and libraries to your project:<ul>
<li>AssetsLibary.framework</li>
<li>CoreMotion.framework</li>
<li>libc++.dylib</li>
</ul>
</li>
<li>5. In the build settings of your apps target add the option '-ObjC' to 'Other Linker Flags'</li>
<li>6. Add the header import to your source code file:</li>
</ul>
<div class="fragment"><div class="line"><span class="preprocessor">#import &quot;<a class="code" href="_s_b_s_d_k_scanbot_s_d_k_8h.html">SBSDKScanbotSDK.h</a>&quot;</span></div>
</div><!-- fragment --><p>You are now ready to use Scanbot SDK in your source file. <br />
<br />
<a class="el" href="install_library.html">See more detailed instructions</a></p>
<p><br />
 </p><h3>2.3 Logging</h3>
<p>Scanbot SDK comes with its own console logging. By default the logging is turned on. You can turn off logging of Scanbot SDK: </p><div class="fragment"><div class="line">[<a class="code" href="interface_scanbot_s_d_k.html">ScanbotSDK</a> <a class="code" href="interface_scanbot_s_d_k.html#ab87a41d64e7eb39566e60284cc810a1c">setLoggingEnabled</a>:NO];</div>
</div><!-- fragment --><p>This will also silence information about the Scanbot SDK license.</p>
<p><br />
 </p><h3>2.4 License</h3>
<p>In order to run Scanbot SDK functionality within your app you must purchase and install a Scanbot SDK license.</p>
<p>Not installing a license will let you test all Scanbot SDK features for a trial period of 1 minute. After the trial period is over your app will be terminated immediately. Installing an invalid license will also terminate your application immediately. Installing an expired but valid license will not terminate your app immediately but when using Scanbot SDK API. If the license expires during the apps life cycle Scanbot SDK will continue to work normally until the next start of the application.</p>
<p>If an expiration date is given for the license the license will expire at that day at 11:59:59 PM o'clock. The timezone of the license is UTC. Any logging of the SDK converts the UTC expiration date to your local timezone.</p>
<p>The license also defines which modules you are allowed to use. The usage of unlicensed modules will log an error to the console and terminate the app.</p>
<p>Each license is valid only to your apps bundle identifier. So no other app can highjack your license and reuse it. Any modification of the license will render it invalid. Make sure that you store your license in a safe location.</p>
<p>You can purchase Scanbot SDK licenses here: <a href="https://scanbot.io">https://scanbot.io</a>.</p>
<p>In order to activate the license in code use the method <code>-setLicense:</code> method in the <a class="el" href="interface_scanbot_s_d_k.html">ScanbotSDK</a> class. Execute this code as early as possible during your apps runtime, but at least before using any Scanbot SDK functionality, e.g. in your application delegates <code>-application:didFinishLaunchingWithOptions:</code> method.</p>
<p>If your license has expired any invocation of the Scanbot SDK API will terminate your app. To prevent this you should check for license expiration during runtime by calling [<a class="el" href="interface_scanbot_s_d_k.html">ScanbotSDK</a> isLicenseValid]. If this method returns NO, you should disable Scanbot SDK using features or UI.</p>
<p>Example code for using the license string </p><div class="fragment"><div class="line">- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {</div>
<div class="line">  <span class="comment">// Override point for customization after application launch.</span></div>
<div class="line">  [<a class="code" href="interface_scanbot_s_d_k.html">ScanbotSDK</a> <a class="code" href="interface_scanbot_s_d_k.html#a2bc57e5352b000248a608211e6a81ce6">setLicense</a>:</div>
<div class="line">  @&quot;P73ZaxJ3VG08E+0sUqcbf+BPmKoCDVmWZthAS/FmYsh2I&quot;</div>
<div class="line">  &quot;DT9AJbIKbBRfaDSzjZed4+py7suMYDq++TuzkqVc9CYwGb&quot;</div>
<div class="line">  &quot;3VL68OhsOEpUAJ/GOdVfZnSTFvDo1JQvq54nY2+EChviwM&quot;</div>
<div class="line">  &quot;CkBXCDO7YSMB/Rp42dlu7x3a/EFbor+PmlBpZhfdwveyWX&quot;</div>
<div class="line">  &quot;5MasHiMzgNicdb33hVgyWgcv74NpxL1XyZkcvn7wQrzgzq&quot;</div>
<div class="line">  &quot;JtJ63YUI6SPmTZtJB2M+0IMYeQXj1HltWX5mcohEIFPme7&quot;</div>
<div class="line">  &quot;hU0BZB3S476QMceeL4bPCZjgu1vjL7kxKurIqmJGT6juGu&quot;</div>
<div class="line">  &quot;kFQFJWPoccmgtJnHxI0Cg==\nU2NhbmJvdFNESwpuZXQuZ&quot;</div>
<div class="line">  &quot;G9vLlBheUZvcm1TY2FubmVyRGVtbwowCjEyOA==\n&quot;];</div>
<div class="line">  </div>
<div class="line">  <span class="keywordflow">return</span> YES;</div>
<div class="line">}</div>
</div><!-- fragment --><p>Example code for checking the license status </p><div class="fragment"><div class="line"><span class="keywordflow">if</span> ([<a class="code" href="interface_scanbot_s_d_k.html">ScanbotSDK</a> isLicenseValid]) {</div>
<div class="line">    <span class="comment">//Making your call into ScanbotSDK API is safe now.</span></div>
<div class="line">    ...</div>
<div class="line">}</div>
</div><!-- fragment --><p><br />
<br />
</p><h2>3. Scanbot SDK Modules in Detail</h2>
<p><br />
</p><h3>3.1 Document Detection</h3>
<p>See <a class="el" href="interface_s_b_s_d_k_document_detector.html">SBSDKDocumentDetector</a>.</p>
<p><a class="el" href="interface_s_b_s_d_k_document_detector.html">SBSDKDocumentDetector</a> uses digital image processing algorithms to find rectangular, document like, polygons in a digital image.</p>
<div class="fragment"><div class="line">- (<a class="code" href="interface_s_b_s_d_k_document_detector_result.html">SBSDKDocumentDetectorResult</a> *)detectDocumentPolygonOnImage:(UIImage *)image</div>
<div class="line">                                             visibleImageRect:(CGRect)visibleRect</div>
<div class="line">                                             smoothingEnabled:(BOOL)smooth</div>
<div class="line">                                   useLiveDetectionParameters:(BOOL)liveDetection</div>
</div><!-- fragment --><p>As input an UIImage object or a CMSampleBufferRef is accepted. Typically the camera API in Apples AVFoundation framework returns CMSampleBufferRef objects. This way you can easily detect document polygons on a live camera video stream or still image shot. Images from the photo library are usually converted to UIImage objects before being passed to the detector.</p>
<p>The visibleRect parameter lets you limit the detection area on the image. If you pass CGRectZero or an a rectangle with zero width or height the whole image is used for detection. The rectangle must be provided in unit coordinate system { 0.0f, 0.0f } - { 1.0f, 1.0f }, where { 0.0f, 0.0f } is the top left and { 1.0f, 1.0f } the bottom right corner of the image. The detector ignores edges that are outside the visibleRect.</p>
<p>The smooth parameter is typically used for realtime detection using the same detector instance all the time. When set to YES, consecutive detected document polygons within a certain timeframe are cumulated into a single dampened polygon. It prevents jumping polygons in situations where the recognized edges changes from video frame to video frame. If you use smoothing you should also observe the devices motion and clear the consecutive polygon buffer if significant motion was detected. This is done by calling the detectors -resetSmoothingData method.</p>
<p>The liveDetection flag you tpyically set to YES when you need the fastest detection possible for e.g. realtime detection. The results are a little bit less accurate than when set to NO but the performance significantly rises. With liveDetection enabled an iPhone 6 can detect up to 20 video frames per second, depending on the video frame resolution. It is recommended to turn off liveDetection if you want to detect only once on a static image.</p>
<p>The result contains an <a class="el" href="interface_s_b_s_d_k_polygon.html">SBSDKPolygon</a> (or nil if nothing was found) and an <a class="el" href="_s_b_s_d_k_document_detection_status_8h.html">SBSDKDocumentDetectionStatus</a> enum member. For user guidance during live detection the status can be used. It tells you whether the detected polygon is too small, the perspective is insufficient or the orientation is not optimal. If there was no polygon detected the status might contain information about why there was no polygon detected (too noisy background, too dark).</p>
<p>For manual realtime detection with the device's camera also take a look at the following classes:</p><ul>
<li><a class="el" href="interface_s_b_s_d_k_camera_session.html">SBSDKCameraSession</a></li>
<li><a class="el" href="interface_s_b_s_d_k_polygon_layer.html">SBSDKPolygonLayer</a></li>
</ul>
<p>Example code for document detection on a video frame </p><div class="fragment"><div class="line">- (void)captureOutput:(AVCaptureOutput *)captureOutput</div>
<div class="line">didOutputSampleBuffer:(CMSampleBufferRef)sampleBuffer</div>
<div class="line">       fromConnection:(AVCaptureConnection *)connection {</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Create an SBSDKDocumentDetector.</span></div>
<div class="line">    <span class="comment">// Note: Usually you store it in a property, for demo purposes we create a new one for each frame.</span></div>
<div class="line">    <a class="code" href="interface_s_b_s_d_k_document_detector.html">SBSDKDocumentDetector</a> *detector = [[<a class="code" href="interface_s_b_s_d_k_document_detector.html">SBSDKDocumentDetector</a> alloc] init];</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Detect a documents outlines on the sample buffer</span></div>
<div class="line">    <a class="code" href="interface_s_b_s_d_k_document_detector_result.html">SBSDKDocumentDetectorResult</a> *result = [detector <a class="code" href="interface_s_b_s_d_k_document_detector.html#a3f54ce3d1f5e37df99599f370bf3e296">detectDocumentPolygonOnSampleBuffer</a>:sampleBuffer</div>
<div class="line">                                                                       <a class="code" href="interface_s_b_s_d_k_document_detector.html#a3f54ce3d1f5e37df99599f370bf3e296">visibleImageRect</a>:CGRectZero</div>
<div class="line">                                                                       <a class="code" href="interface_s_b_s_d_k_document_detector.html#a3f54ce3d1f5e37df99599f370bf3e296">smoothingEnabled</a>:YES</div>
<div class="line">                                                             <a class="code" href="interface_s_b_s_d_k_document_detector.html#a3f54ce3d1f5e37df99599f370bf3e296">useLiveDetectionParameters</a>:YES];</div>
<div class="line"></div>
<div class="line">    <span class="comment">// If we have an acceptable polygon...</span></div>
<div class="line">    <span class="keywordflow">if</span> (result.<a class="code" href="interface_s_b_s_d_k_document_detector_result.html#a1058d10a89415b34b7811d46a8099e5f">status</a> == <a class="code" href="_s_b_s_d_k_document_detection_status_8h.html#af11f3ac739e65e9ca7e9b0fce2a7c2f8acc12be9ec79b5e741b5ed1ebd0da1650">SBSDKDocumentDetectionStatusOK</a> &amp;&amp; result.<a class="code" href="interface_s_b_s_d_k_document_detector_result.html#afc350218a8591284cc5bfbbdff46a0f1">polygon</a> != nil) {</div>
<div class="line">        <span class="comment">// We take a still shot from the camera.</span></div>
<div class="line">        <span class="comment">// Create an UIImage from the still shot sample buffer.</span></div>
<div class="line">        <span class="comment">// Warp the image into the polygon.</span></div>
<div class="line">        [<span class="keyword">self</span>.cameraSession captureStillImageWithCompletionHandler:^(CMSampleBufferRef sampleBuffer, NSError *error) {</div>
<div class="line">            UIImage *image = [UIImage imageFromSampleBuffer:sampleBuffer]; </div>
<div class="line">            image = [image imageWarpedByPolygon:result.polygon imageScale:1.0];</div>
<div class="line">        }];</div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment --><p><br />
</p><h3>3.2 User Interface for guided, automatic Document Scanning</h3>
<p>See <a class="el" href="interface_s_b_s_d_k_scanner_view_controller.html">SBSDKScannerViewController</a>.</p>
<p>For your convenience Scanbot SDK comes with a view controller subclass that handles all the camera and detection implementation details for you. Additionally it provides UI for Scanbots document scanning guidance as well as the functionality and UI for manual and automatic shutter release.</p>
<p>The controllers delegate can customize the appearance and behavior of the guidance UI. Further <a class="el" href="interface_s_b_s_d_k_scanner_view_controller.html">SBSDKScannerViewController</a> gives its delegate control over how and when frames are analyzed and, most important, it delivers the scanned (and perspective corrected, cropped document) images to its delegate.</p>
<p>See <a class="el" href="protocol_s_b_s_d_k_scanner_view_controller_delegate-p.html">SBSDKScannerViewControllerDelegate</a> for customization of UI and behavior.</p>
<p>Example code</p>
<div class="fragment"><div class="line"><span class="preprocessor">#import &quot;<a class="code" href="_s_b_s_d_k_scanbot_s_d_k_8h.html">SBSDKScanbotSDK.h</a>&quot;</span></div>
<div class="line"></div>
<div class="line"><span class="keyword">@interface </span>DemoViewController : UIViewController</div>
<div class="line"><span class="keyword">@end</span></div>
<div class="line"></div>
<div class="line"><span class="keyword">@interface </span>DemoViewController() &lt;<a class="code" href="protocol_s_b_s_d_k_scanner_view_controller_delegate-p.html">SBSDKScannerViewControllerDelegate</a>&gt;</div>
<div class="line"><span class="keyword">@property</span> (strong, nonatomic) <a class="code" href="interface_s_b_s_d_k_image_storage.html">SBSDKImageStorage</a> *imageStorage;</div>
<div class="line"><span class="keyword">@property</span> (strong, nonatomic) <a class="code" href="interface_s_b_s_d_k_scanner_view_controller.html">SBSDKScannerViewController</a> *scannerViewController;</div>
<div class="line"><span class="keyword">@property</span> (assign, nonatomic) BOOL viewAppeared;</div>
<div class="line"><span class="keyword">@end</span></div>
<div class="line"></div>
<div class="line"><span class="keyword">@implementation </span>DemoViewController</div>
<div class="line"></div>
<div class="line">- (void)viewDidLoad {</div>
<div class="line">    [<span class="keyword">super</span> viewDidLoad];</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Create an image storage to save the captured document images to</span></div>
<div class="line">    <span class="keyword">self</span>.<a class="code" href="interface_s_b_s_d_k_scanner_view_controller.html#a01ee9c9a1fd3a05569e678496437d95d">imageStorage</a> = [[<a class="code" href="interface_s_b_s_d_k_image_storage.html">SBSDKImageStorage</a> alloc] init];</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Create the SBSDKScannerViewController.</span></div>
<div class="line">    <span class="comment">// We want it to be embedded into self.</span></div>
<div class="line">    <span class="comment">// As we do not want automatic image storage we pass nil here for the image storage.</span></div>
<div class="line">    <span class="keyword">self</span>.scannerViewController </div>
<div class="line">    = [[<a class="code" href="interface_s_b_s_d_k_scanner_view_controller.html">SBSDKScannerViewController</a> alloc] initWithParentViewController:self imageStorage:nil];</div>
<div class="line">    </div>
<div class="line">    <span class="comment">// Set the delegate to self.</span></div>
<div class="line">    <span class="keyword">self</span>.scannerViewController.delegate = <span class="keyword">self</span>;</div>
<div class="line"></div>
<div class="line">    <span class="comment">// We want unscaled images in full 5 or 8 MPixel size.</span></div>
<div class="line">    <span class="keyword">self</span>.scannerViewController.imageScale = 1.0f;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line">- (void)viewWillDisappear:(BOOL)animated {</div>
<div class="line">    [<span class="keyword">super</span> viewWillDisappear:animated];</div>
<div class="line">    <span class="keyword">self</span>.viewAppeared = NO;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line">- (void)viewDidAppear:(BOOL)animated {</div>
<div class="line">    [<span class="keyword">super</span> viewDidAppear:animated];</div>
<div class="line">    <span class="keyword">self</span>.viewAppeared = YES;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line">- (BOOL)shouldAutorotate {</div>
<div class="line">    <span class="comment">// No autorotations.</span></div>
<div class="line">    <span class="keywordflow">return</span> NO;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line">- (NSUInteger)supportedInterfaceOrientations {</div>
<div class="line">    <span class="comment">// Only portrait.</span></div>
<div class="line">    <span class="keywordflow">return</span> UIInterfaceOrientationMaskPortrait;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line">- (UIStatusBarStyle)preferredStatusBarStyle {</div>
<div class="line">    <span class="comment">// White statusbar.</span></div>
<div class="line">    <span class="keywordflow">return</span> UIStatusBarStyleLightContent;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#pragma mark - SBSDKScannerViewControllerDelegate</span></div>
<div class="line"></div>
<div class="line">- (BOOL)scannerControllerShouldAnalyseVideoFrame:(<a class="code" href="interface_s_b_s_d_k_scanner_view_controller.html">SBSDKScannerViewController</a> *)controller {</div>
<div class="line">    <span class="comment">// We want to only process video frames when self is visible on screen and front most view controller</span></div>
<div class="line">    <span class="keywordflow">return</span> <span class="keyword">self</span>.viewAppeared &amp;&amp; <span class="keyword">self</span>.presentedViewController == nil;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line">- (void)scannerController:(<a class="code" href="interface_s_b_s_d_k_scanner_view_controller.html">SBSDKScannerViewController</a> *)controller</div>
<div class="line">  didCaptureDocumentImage:(UIImage *)documentImage {</div>
<div class="line">    <span class="comment">// Here we get the perspective corrected and cropped document image after the shutter was (auto)released.</span></div>
<div class="line">    <span class="comment">// We store it into our image storage.</span></div>
<div class="line">    [<span class="keyword">self</span>.imageStorage addImage:documentImage];</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line">- (void)scannerController:(<a class="code" href="interface_s_b_s_d_k_scanner_view_controller.html">SBSDKScannerViewController</a> *)controller didCaptureImage:(CMSampleBufferRef)sampleBuffer {</div>
<div class="line">    <span class="comment">// Here we get the full image from the camera. We could run another manual detection here or use the latest</span></div>
<div class="line">    <span class="comment">// detected polygon from the video stream to process the image with.</span></div>
<div class="line">}</div>
<div class="line"></div>
<div class="line">- (void)scannerController:(<a class="code" href="interface_s_b_s_d_k_scanner_view_controller.html">SBSDKScannerViewController</a> *)controller</div>
<div class="line">         didDetectPolygon:(<a class="code" href="interface_s_b_s_d_k_polygon.html">SBSDKPolygon</a> *)polygon</div>
<div class="line">               withStatus:(<a class="code" href="_s_b_s_d_k_document_detection_status_8h.html#af11f3ac739e65e9ca7e9b0fce2a7c2f8">SBSDKDocumentDetectionStatus</a>)status {</div>
<div class="line">    <span class="comment">// Everytime the document detector finishes detection it calls this delegate method.</span></div>
<div class="line"></div>
<div class="line">}</div>
<div class="line"></div>
<div class="line">- (UIView *)scannerController:(<a class="code" href="interface_s_b_s_d_k_scanner_view_controller.html">SBSDKScannerViewController</a> *)controller </div>
<div class="line">       viewForDetectionStatus:(<a class="code" href="_s_b_s_d_k_document_detection_status_8h.html#af11f3ac739e65e9ca7e9b0fce2a7c2f8">SBSDKDocumentDetectionStatus</a>)status {</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Here we can return a custom view that we want to use to visualize the latest detection status.</span></div>
<div class="line">    <span class="comment">// We return nil for now to use the standard label.</span></div>
<div class="line">    <span class="keywordflow">return</span> nil;</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line">- (UIColor *)scannerController:(<a class="code" href="interface_s_b_s_d_k_scanner_view_controller.html">SBSDKScannerViewController</a> *)controller </div>
<div class="line">polygonColorForDetectionStatus:(<a class="code" href="_s_b_s_d_k_document_detection_status_8h.html#af11f3ac739e65e9ca7e9b0fce2a7c2f8">SBSDKDocumentDetectionStatus</a>)status {</div>
<div class="line"></div>
<div class="line">    <span class="comment">// If the detector has found an acceptable polygon we show it with green color</span></div>
<div class="line">    <span class="keywordflow">if</span> (status == <a class="code" href="_s_b_s_d_k_document_detection_status_8h.html#af11f3ac739e65e9ca7e9b0fce2a7c2f8acc12be9ec79b5e741b5ed1ebd0da1650">SBSDKDocumentDetectionStatusOK</a>) {</div>
<div class="line">        <span class="keywordflow">return</span> [UIColor greenColor];</div>
<div class="line">    }</div>
<div class="line">    <span class="comment">// Otherwise red colored.</span></div>
<div class="line">    <span class="keywordflow">return</span> [UIColor redColor];</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><span class="keyword">@end</span></div>
</div><!-- fragment --><p>See <a class="el" href="protocol_s_b_s_d_k_scanner_view_controller_delegate-p.html">SBSDKScannerViewControllerDelegate</a> for details.</p>
<p><br />
</p><h3>3.3 Image Processing</h3>
<p>See <a class="el" href="interface_s_b_s_d_k_image_processor.html">SBSDKImageProcessor</a></p>
<p>Digital image processing is a core part of Scanbot SDK. Basically there are three operations on images:</p><ul>
<li>Rotation</li>
<li>Image filtering</li>
<li>Image warping (perspective correction and cropping) into a 4-sided polygons shape</li>
</ul>
<p>All of these image operations can be called either synchronously in any thread or queue or asynchronously on a special serial image processing queue. When working with large images it is highly recommended to make use of the asynchronous API as here no parallel processing of images is possible. Processing large images concurrently easily causes memory warnings and crashes.</p>
<p>Synchronous API can be found in the <a class="el" href="_u_i_image_s_b_s_d_k_8h.html">UIImageSBSDK</a> class extension.</p>
<p>The asynchronous API is implemented as static class <a class="el" href="interface_s_b_s_d_k_image_processor.html">SBSDKImageProcessor</a>. Additionally to the three standard operations <a class="el" href="interface_s_b_s_d_k_image_processor.html">SBSDKImageProcessor</a> provides a method to apply custom image processing by specifying an SBSDKImageProcessingHandler block. Execution is also dispatched to the image processing queue. The operations completion handlers are called in main thread.</p>
<p>Each call into the asynchronous API returns a <a class="el" href="interface_s_b_s_d_k_progress.html">SBSDKProgress</a> object to you. This NSProgress subclass can be used to observe the progress of the operation but also it can be used to cancel the operation via the <code>-(void)cancel</code> method.</p>
<p>Example code for custom asynchronous image filter </p><div class="fragment"><div class="line"><span class="comment">// Specify the file URL for the input image</span></div>
<div class="line">NSURL *inputImageURL = ...;</div>
<div class="line"></div>
<div class="line"><span class="comment">// Specify the file URL the output image is written to. Set to nil, if you dont want to save the output image</span></div>
<div class="line">NSURL *outputImageURL = ...;</div>
<div class="line"></div>
<div class="line"><span class="comment">// Create the image processing block</span></div>
<div class="line"><a class="code" href="_s_b_s_d_k_image_processor_8h.html#a8fbca1788306aac4f3a71247aafe5df5">SBSDKImageProcessingHandler</a> processingHandler = ^UIImage *(UIImage *sourceImage, NSError **outError) {</div>
<div class="line">    <span class="comment">// Apply a color filter to the input image,</span></div>
<div class="line">    UIImage *filteredImage = [sourceImage imageFilteredBy:SBSDKImageFilterTypeColor];</div>
<div class="line"></div>
<div class="line">    <span class="comment">// and return the filtered image.</span></div>
<div class="line">    <span class="keywordflow">return</span> filteredImage;</div>
<div class="line">};</div>
<div class="line"></div>
<div class="line"><span class="comment">// Call the asynchronous image processing API. The returned progress object can be used to to cancel the operation.</span></div>
<div class="line"><span class="comment">// Once the operation has been completed extract the image from resultInfo dictionary and do whatever you want with the image.</span></div>
<div class="line"><a class="code" href="interface_s_b_s_d_k_progress.html">SBSDKProgress</a> *progress</div>
<div class="line">= [<a class="code" href="interface_s_b_s_d_k_image_processor.html">SBSDKImageProcessor</a> <a class="code" href="interface_s_b_s_d_k_image_processor.html#a7c41db9b1817ad38c4e331552f30acfc">customFilterImage</a>:inputImageURL</div>
<div class="line">                         <a class="code" href="interface_s_b_s_d_k_image_processor.html#a7c41db9b1817ad38c4e331552f30acfc">processingBlock</a>:processingHandler</div>
<div class="line">                          <a class="code" href="interface_s_b_s_d_k_image_processor.html#a7c41db9b1817ad38c4e331552f30acfc">outputImageURL</a>:outputImageURL</div>
<div class="line">                              <a class="code" href="interface_s_b_s_d_k_image_processor.html#a7c41db9b1817ad38c4e331552f30acfc">completion</a>:^(BOOL finished, NSError *error, NSDictionary *resultInfo) {</div>
<div class="line">                                  UIImage *outputImage = resultInfo[SBSDKResultInfoDestinationImageKey];</div>
<div class="line">                              }];</div>
</div><!-- fragment --><p>Example code for detecting and applying a polygon to an image </p><div class="fragment"><div class="line"><span class="comment">// Specify the input image URL.</span></div>
<div class="line">NSURL *inputImageURL = ...;</div>
<div class="line"></div>
<div class="line"><span class="comment">// Specify the output image URL. Set to nil, if you dont want to save the output image.</span></div>
<div class="line">NSURL *outputImageURL = ...;</div>
<div class="line"></div>
<div class="line"><span class="comment">// Create a document detector.</span></div>
<div class="line"><a class="code" href="interface_s_b_s_d_k_document_detector.html">SBSDKDocumentDetector</a> *detector = [[<a class="code" href="interface_s_b_s_d_k_document_detector.html">SBSDKDocumentDetector</a> alloc] init];</div>
<div class="line"></div>
<div class="line"><span class="comment">// Let the document detector run on our input image.</span></div>
<div class="line"><a class="code" href="interface_s_b_s_d_k_document_detector_result.html">SBSDKDocumentDetectorResult</a> *result</div>
<div class="line">= [detector <a class="code" href="interface_s_b_s_d_k_document_detector.html#a83c98a3da118c3ab725abcd76d667e96">detectDocumentPolygonOnImage</a>:[UIImage imageWithContentsOfFile:inputImageURL.path]</div>
<div class="line">                        <a class="code" href="interface_s_b_s_d_k_document_detector.html#a83c98a3da118c3ab725abcd76d667e96">visibleImageRect</a>:CGRectZero</div>
<div class="line">                        <a class="code" href="interface_s_b_s_d_k_document_detector.html#a83c98a3da118c3ab725abcd76d667e96">smoothingEnabled</a>:NO</div>
<div class="line">              <a class="code" href="interface_s_b_s_d_k_document_detector.html#a83c98a3da118c3ab725abcd76d667e96">useLiveDetectionParameters</a>:NO];</div>
<div class="line"></div>
<div class="line"><span class="comment">// Check the result.</span></div>
<div class="line"><span class="keywordflow">if</span> (result.<a class="code" href="interface_s_b_s_d_k_document_detector_result.html#a1058d10a89415b34b7811d46a8099e5f">status</a> == <a class="code" href="_s_b_s_d_k_document_detection_status_8h.html#af11f3ac739e65e9ca7e9b0fce2a7c2f8acc12be9ec79b5e741b5ed1ebd0da1650">SBSDKDocumentDetectionStatusOK</a> &amp;&amp; result.<a class="code" href="interface_s_b_s_d_k_document_detector_result.html#afc350218a8591284cc5bfbbdff46a0f1">polygon</a> != nil) {</div>
<div class="line"></div>
<div class="line">    <span class="comment">// If the result is an acceptable polygon, we warp the image into the polygon asynchronously.</span></div>
<div class="line">    <span class="comment">// When warping is done we check the result and on success we pick up the output image.</span></div>
<div class="line">    <span class="comment">// Then do whatever you want with the warped image.</span></div>
<div class="line">    [<a class="code" href="interface_s_b_s_d_k_image_processor.html">SBSDKImageProcessor</a> <a class="code" href="interface_s_b_s_d_k_image_processor.html#a0a3f86af0ba4f83fc327cd489198530a">warpImage</a>:inputImageURL</div>
<div class="line">                           <a class="code" href="interface_s_b_s_d_k_image_processor.html#a0a3f86af0ba4f83fc327cd489198530a">polygon</a>:result.polygon</div>
<div class="line">                    <a class="code" href="interface_s_b_s_d_k_image_processor.html#a0a3f86af0ba4f83fc327cd489198530a">outputImageURL</a>:outputImageURL</div>
<div class="line">                        <a class="code" href="interface_s_b_s_d_k_image_processor.html#a0a3f86af0ba4f83fc327cd489198530a">completion</a>:^(BOOL finished, NSError *error, NSDictionary *resultInfo) {</div>
<div class="line">                            if (finished &amp;&amp; !error) {</div>
<div class="line">                                UIImage *outputImage = resultInfo[SBSDKResultInfoDestinationImageKey];</div>
<div class="line">                            }</div>
<div class="line">                        }];</div>
<div class="line">    } <span class="keywordflow">else</span> {</div>
<div class="line">        <span class="comment">// No acceptable polygon found.</span></div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment --><p><br />
</p><h3>3.4 PDF Creation</h3>
<p>See <a class="el" href="interface_s_b_s_d_k_p_d_f_renderer.html">SBSDKPDFRenderer</a>.</p>
<p>The <a class="el" href="interface_s_b_s_d_k_p_d_f_renderer.html">SBSDKPDFRenderer</a> static class takes an image storage (<a class="el" href="interface_s_b_s_d_k_image_storage.html">SBSDKImageStorage</a>) and renders them into a PDF. For each image a page is generated. The generated pages have sizes that correspond to DIN A4, US Letter or Custom. As the images are embedded unscaled the resolution for each page depends on its image. When rendering into a DIN A4 or US Letter format the orientation of the page; landscape or portrait; is derived from the images aspect ratio.</p>
<p>See <a class="el" href="_s_b_s_d_k_p_d_f_renderer_8h.html#ab530aea8dfe1aae8f80f5b2f69f4463d">SBSDKPDFRendererPageSize</a> for further information.</p>
<p>The operations completion handler is called in main thread.</p>
<p>Example code for creating a standard PDF from an image storage </p><div class="fragment"><div class="line"><span class="comment">// Create or use an exisiting image storage.</span></div>
<div class="line"><a class="code" href="interface_s_b_s_d_k_image_storage.html">SBSDKImageStorage</a> *imageStorage = [<a class="code" href="interface_s_b_s_d_k_image_storage.html">SBSDKImageStorage</a> <a class="code" href="interface_s_b_s_d_k_image_storage.html#a24c0a681325d466fd41540a5946e61b5">temporaryStorageWithImages</a>:...];</div>
<div class="line"></div>
<div class="line"><span class="comment">// Define the indices of the images in the image storage you want to render to the PDF, e.g. the first 3.</span></div>
<div class="line"><span class="comment">// To include all images you can simply pass nil for the indexSet. The indexSet internally is validated.</span></div>
<div class="line"><span class="comment">// You dont need to take care if all indices are valid.</span></div>
<div class="line">NSIndexSet *indexSet = [NSIndexSet indexSetWithIndexesInRange:NSMakeRange(0, 2)];</div>
<div class="line"></div>
<div class="line"><span class="comment">// Specify the file URL where the PDF will be saved to. Nil here makes no sense.</span></div>
<div class="line">NSURL *outputPDFURL = ...;</div>
<div class="line"></div>
<div class="line"><span class="comment">// Enqueue the operation and store the SBSDKProgress to watch the progress or cancel the operation.</span></div>
<div class="line"><span class="comment">// After completion the PDF is stored at the URL specified in outputPDFURL.</span></div>
<div class="line"><span class="comment">// You can also extract the image store and the PDF URL from the resultInfo.</span></div>
<div class="line"></div>
<div class="line"><a class="code" href="interface_s_b_s_d_k_progress.html">SBSDKProgress</a> *progress = </div>
<div class="line">[<a class="code" href="interface_s_b_s_d_k_p_d_f_renderer.html">SBSDKPDFRenderer</a> <a class="code" href="interface_s_b_s_d_k_p_d_f_renderer.html#a43a6d9036e4f2f8291674d17152e6c17">renderImageStorage</a>:imageStorage</div>
<div class="line">                    <a class="code" href="interface_s_b_s_d_k_p_d_f_renderer.html#a43a6d9036e4f2f8291674d17152e6c17">copyImageStorage</a>:YES</div>
<div class="line">                            <a class="code" href="interface_s_b_s_d_k_p_d_f_renderer.html#a43a6d9036e4f2f8291674d17152e6c17">indexSet</a>:indexSet</div>
<div class="line">                        <a class="code" href="interface_s_b_s_d_k_p_d_f_renderer.html#a43a6d9036e4f2f8291674d17152e6c17">withPageSize</a>:SBSDKPDFRendererPageSizeAutoLocale</div>
<div class="line">                              <a class="code" href="interface_s_b_s_d_k_p_d_f_renderer.html#a43a6d9036e4f2f8291674d17152e6c17">output</a>:outputPDFURL</div>
<div class="line">                   <a class="code" href="interface_s_b_s_d_k_p_d_f_renderer.html#a43a6d9036e4f2f8291674d17152e6c17">completionHandler</a>:^(BOOL finished, NSError *error, NSDictionary *resultInfo) {</div>
<div class="line">                       if (finished &amp;&amp; error != nil) {</div>
<div class="line">                           SBSDKImageStorage *completedImageStore = resultInfo[SBSDKResultInfoImageStorageKey];</div>
<div class="line">                           NSURL *completedPDFURL = resultInfo[SBSDKResultInfoDestinationFileURLKey];</div>
<div class="line">                       }</div>
<div class="line">                   }];</div>
</div><!-- fragment --><p><br />
</p><h3>3.5 Optical Character Recognition</h3>
<p>See <a class="el" href="interface_s_b_s_d_k_optical_text_recognizer.html">SBSDKOpticalTextRecognizer</a>.</p>
<p><a class="el" href="interface_s_b_s_d_k_optical_text_recognizer.html">SBSDKOpticalTextRecognizer</a> takes one or more images and performs various text related operations on each of the images:</p><ul>
<li>Page layout analysis</li>
<li>Text recognizing</li>
<li>Creation of searchable PDF documents with selectable text</li>
</ul>
<p>The page layout analysis returns information about page orientation, an angle the image should be rotated to deskew it, the text writing direction or the text line order.</p>
<p>The text recognizing operations take either a collection of images (<a class="el" href="interface_s_b_s_d_k_image_storage.html">SBSDKImageStorage</a>) and optionally create a PDF of it, or a single image. The single image operation also can take a rectangle describing which area of the image should be text-recognized. The results found in the completion handlers resultsDictionary contain information about the found text, where the text was found (boundingBox) and what kind of text it is (word, line, paragraph).</p>
<p>All <a class="el" href="interface_s_b_s_d_k_optical_text_recognizer.html">SBSDKOpticalTextRecognizer</a> operations run in a separate serial queue.</p>
<p>The operations completion handlers are called in main thread.</p>
<p>Example code for performing a page layout analysis. </p><div class="fragment"><div class="line"><span class="comment">// The file URL of the image we want to analyse.</span></div>
<div class="line">NSURL *imageURL = ...;</div>
<div class="line"></div>
<div class="line"><span class="comment">// Start the page layout analysis and store the returned SBSDKProgress object. This object can be used to cancel</span></div>
<div class="line"><span class="comment">// the operation or to observe the progress. See NSProgress.</span></div>
<div class="line"><span class="comment">// In completion check if we finished without error and extract the analyzer result from the resultInfo dictionary.</span></div>
<div class="line"><span class="comment">// Now we can work with the result.</span></div>
<div class="line"><a class="code" href="interface_s_b_s_d_k_progress.html">SBSDKProgress</a> *progress =</div>
<div class="line">[<a class="code" href="interface_s_b_s_d_k_optical_text_recognizer.html">SBSDKOpticalTextRecognizer</a> <a class="code" href="interface_s_b_s_d_k_optical_text_recognizer.html#a148eab2f04647f17aad55a9bf7e07765">analyseImagePageLayout</a>:imageURL</div>
<div class="line">                                        <a class="code" href="interface_s_b_s_d_k_optical_text_recognizer.html#a148eab2f04647f17aad55a9bf7e07765">completion</a>:^(BOOL finished, NSError *error, NSDictionary *resultInfo) {</div>
<div class="line">    if (finished &amp;&amp; !error) {</div>
<div class="line"></div>
<div class="line">        SBSDKPageAnalyzerResult *result = resultInfo[SBSDKResultInfoPageAnalyzerResultsKey];</div>
<div class="line"></div>
<div class="line">        if (result.orientation != SBSDKPageOrientationUp) {</div>
<div class="line">        </div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line">}];</div>
</div><!-- fragment --><p>Example code for performing text recognition in an image. </p><div class="fragment"><div class="line"><span class="comment">// The file URL of the image we want to analyse.</span></div>
<div class="line">NSURL *imageURL = nil;</div>
<div class="line"></div>
<div class="line"><span class="comment">// Enqueue the text recognition operation.</span></div>
<div class="line"><span class="comment">// We limit detection to the center area of the image leaving margins of 25% on each side.</span></div>
<div class="line"><span class="comment">// Only use english language to be recognized.</span></div>
<div class="line"><span class="comment">// The returned SBSDKProgress object can be used to cancel the operation or observer the progress.</span></div>
<div class="line"><span class="comment">// Upon completion we extract the result from the resultsDictionary and log the whole recognized text.</span></div>
<div class="line"><span class="comment">// The we enumerate all words and log them to the console together with their confidence values and bounding boxes.</span></div>
<div class="line"><a class="code" href="interface_s_b_s_d_k_progress.html">SBSDKProgress</a> *progress =</div>
<div class="line">[<a class="code" href="interface_s_b_s_d_k_optical_text_recognizer.html">SBSDKOpticalTextRecognizer</a> <a class="code" href="interface_s_b_s_d_k_optical_text_recognizer.html#a9a84e07c510bdf78a2e5bc891572af87">recognizeText</a>:imageURL</div>
<div class="line">                                <a class="code" href="interface_s_b_s_d_k_optical_text_recognizer.html#a9a84e07c510bdf78a2e5bc891572af87">rectangle</a>:CGRectMake(0.25f, 0.25f, 0.5f, 0.5f)</div>
<div class="line">                           <a class="code" href="interface_s_b_s_d_k_optical_text_recognizer.html#a9a84e07c510bdf78a2e5bc891572af87">languageString</a>:@&quot;eng&quot;</div>
<div class="line">                               <a class="code" href="interface_s_b_s_d_k_optical_text_recognizer.html#a9a84e07c510bdf78a2e5bc891572af87">completion</a>:^(BOOL finished, NSError *error, NSDictionary *resultInfo) {</div>
<div class="line">    </div>
<div class="line">    SBSDKOCRResult *result = resultInfo[SBSDKResultInfoOCRResultsKey];</div>
<div class="line">    NSLog(@&quot;Recognized Text: %@&quot;, result.recognizedText);</div>
<div class="line">    for (SBSDKOCRResultBlock *word in result.words) {</div>
<div class="line">        NSLog(@&quot;Word: %@, Confidence: %0.0f, Box: %@&quot;,</div>
<div class="line">            word.text,</div>
<div class="line">            word.confidenceValue,</div>
<div class="line">            NSStringFromCGRect(word.boundingBox));</div>
<div class="line">    }</div>
<div class="line">}];</div>
</div><!-- fragment --><p><br />
</p><h3>3.6 Payform Recognition</h3>
<p>See <a class="el" href="interface_s_b_s_d_k_pay_form_scanner.html">SBSDKPayFormScanner</a>.</p>
<p>The <a class="el" href="interface_s_b_s_d_k_pay_form_scanner.html">SBSDKPayFormScanner</a> class provides functionality to detect and recognize SEPA payforms. It extracts relevant information fields by performing optical text recognition on certain areas of the image, e.g. IBAN, BIC, receiver, amount of money and reference.</p>
<p>This module needs the german language package. See <a class="el" href="interface_s_b_s_d_k_optical_text_recognizer.html">SBSDKOpticalTextRecognizer</a> for language addition.</p>
<p>For performance reasons the scanner is divided into two parts: detection and recognition. The detection only tests whether the scanned image contains a payform or not. The recognizer performs the text extraction and fills the fields.</p>
<p>The common usage is to configure the iPhones camera for full HD video capturing and run the detection part on each incoming frame synchronously in the video capture queue. When the detector returns a positive result the recognizing part runs on the same full HD frame in the same video capture queue and returns the recognizers result.</p>
<p>Example code on how to detect and recognize payforms in the video delegate </p><div class="fragment"><div class="line">- (void)captureOutput:(AVCaptureOutput *)captureOutput</div>
<div class="line">didOutputSampleBuffer:(CMSampleBufferRef)sampleBuffer</div>
<div class="line">       fromConnection:(AVCaptureConnection *)connection {</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Create an SBSDKPayFormScanner.</span></div>
<div class="line">    <span class="comment">// Note: Usually you store it in a property, for demo purposes we create a new one for each frame.</span></div>
<div class="line">    <a class="code" href="interface_s_b_s_d_k_pay_form_scanner.html">SBSDKPayFormScanner</a> *scanner = [[<a class="code" href="interface_s_b_s_d_k_pay_form_scanner.html">SBSDKPayFormScanner</a> alloc] init];</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Get the video orientation from the camera session (of the SBSDKScannerViewController).</span></div>
<div class="line">    AVCaptureVideoOrientation videoOrientation = <span class="keyword">self</span>.scannerViewController.cameraSession.videoOrientation;</div>
<div class="line"></div>
<div class="line">    <span class="comment">// Detect bank transfer form in the sample buffer.</span></div>
<div class="line">    <a class="code" href="interface_s_b_s_d_k_pay_form_detection_result.html">SBSDKPayFormDetectionResult</a> *detectionResult = [scanner <a class="code" href="interface_s_b_s_d_k_pay_form_scanner.html#a8dfdbd56916dd43529f6f192d3a55e54">detectInSampleBuffer</a>:sampleBuffer </div>
<div class="line">                                                                     <a class="code" href="interface_s_b_s_d_k_pay_form_scanner.html#a8dfdbd56916dd43529f6f192d3a55e54">orientation</a>:videoOrientation];</div>
<div class="line"></div>
<div class="line">    <span class="comment">// If we have detected a valid payform</span></div>
<div class="line">    <span class="keywordflow">if</span> (detectionResult.<a class="code" href="interface_s_b_s_d_k_pay_form_detection_result.html#a66413217399cd82b2f79b361a0ad464f">isValidPayForm</a>) {</div>
<div class="line"></div>
<div class="line">        <span class="comment">// We perform the recognition step.</span></div>
<div class="line">        <a class="code" href="interface_s_b_s_d_k_pay_form_recognition_result.html">SBSDKPayFormRecognitionResult</a> *recognitionResult = [scanner <a class="code" href="interface_s_b_s_d_k_pay_form_scanner.html#ad07be7253aea397a67972ba5b97a895a">recognizeFieldsInSampleBuffer</a>:sampleBuffer</div>
<div class="line">                                                                                      <a class="code" href="interface_s_b_s_d_k_pay_form_scanner.html#ad07be7253aea397a67972ba5b97a895a">orientation</a>:videoOrientation];</div>
<div class="line"></div>
<div class="line">        dispatch_async(dispatch_get_main_queue(), ^{</div>
<div class="line">            <span class="comment">// Present the recognition results alert on main thread.</span></div>
<div class="line">        });</div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment --><p><br />
<br />
 </p>
</div></div><!-- contents -->
<!--<div id="nav-path" class="navpath">
 <ul>
        <li class="footer">Scanbot SDK Documentation - Copyright 2015 by doo GmbH
            <a href="https://scanbot.io">
            </a></li>
    </ul>
</div>-->
<link href="ScanbotSDK.css" rel="stylesheet" type="text/css" />
<div class="footer">
        Scanbot SDK Documentation - Copyright 2015 by doo GmbH generated on Tue Jul 19 2016 10:13:08 <a href="https://scanbot.io"></a>
 </div>